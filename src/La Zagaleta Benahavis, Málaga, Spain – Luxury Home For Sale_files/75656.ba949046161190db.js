"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75656],{75656:function(e,t,l){l.r(t),l.d(t,{default:function(){return q}});var i=l(85893),a=l(67294),n=l(73935),o=l(41248),s=l(37046),r=l(91752),d=l(28511),u=l(30011),c=l(1556),v=l(92090),m=l(64418),p=l(19264),g=l(17230),f=l(24990),_=l(66633),h=l(13307),b=l(33940),y=l(58247),x=l(75703),j=l(7369),N=l(13519),A=l(45783),L=l(75571),k=l(24547);let w={page:{LDP:{messages:{placeHolderText:(0,m.X)("global:I'm interested in the property at {0}"),checkboxText:(0,m.X)("global:Send to all agents listing this property")},emailAgentModule:"listingemailagent"},NDDP:{messages:{placeHolderText:(0,m.X)("global:I'm interested in the {0}"),checkboxText:(0,m.X)("global:Send to all agents listing this development")},emailAgentModule:"communityemailagent"}}},D=e=>{var t,l,n,o,s,d,u,c,v,g,f,D,C,M,S,P,T,E,G,X,R,F,B,q,Z,O,U;let{data:K,listingWebId:W,agents:z=[],selectedAgentIndex:H=0,popupMode:Y=!1,displayForm:V=!1,setOpenPopup:$=()=>{},config:J}=e,Q=(0,r.G)().Misc().mainDomainFetchURL+(0,r.G)().SeoService("currentSeoURL"),ee=null==K?void 0:null===(t=K.legacyData)||void 0===t?void 0:null===(l=t.listing)||void 0===l?void 0:null===(n=l._attributes)||void 0===n?void 0:n.id,et=null==K?void 0:null===(o=K.legacyData)||void 0===o?void 0:null===(s=o.listing)||void 0===s?void 0:null===(d=s.address)||void 0===d?void 0:null===(u=d.address)||void 0===u?void 0:u._cdata,el="",ei=!0,ea=(null==J?void 0:J.pageType)?w.page[J.pageType].messages.placeHolderText:w.page.LDP.messages.placeHolderText,en=(null==J?void 0:J.pageType)?w.page[J.pageType].emailAgentModule:w.page.LDP.emailAgentModule,eo=null===(c=(0,r.G)().SiteSettings().PageType)||void 0===c?void 0:c.toLowerCase();if("listingdetails"===eo&&(null==K?void 0:null===(v=K.legacyData)||void 0===v?void 0:null===(g=v.listing)||void 0===g?void 0:g.agent)){if(Array.isArray(null==K?void 0:null===(f=K.legacyData)||void 0===f?void 0:null===(D=f.listing)||void 0===D?void 0:D.agent)&&(null==K?void 0:null===(C=K.legacyData)||void 0===C?void 0:null===(M=C.listing)||void 0===M?void 0:null===(S=M.agent)||void 0===S?void 0:S.length)>0){let e=null==K?void 0:null===(X=K.legacyData)||void 0===X?void 0:null===(R=X.listing)||void 0===R?void 0:R.agent[0],t=null==e?void 0:null===(F=e.email)||void 0===F?void 0:F._text;(ei=!!t)?en="listingemailagent":(en="agentemailagent",el=null==e?void 0:null===(B=e._attributes)||void 0===B?void 0:B.id)}else if(!Array.isArray(null==K?void 0:null===(P=K.legacyData)||void 0===P?void 0:null===(T=P.listing)||void 0===T?void 0:T.agent)&&(null==K?void 0:null===(E=K.legacyData)||void 0===E?void 0:null===(G=E.listing)||void 0===G?void 0:G.agent)){let e=null==K?void 0:null===(q=K.legacyData)||void 0===q?void 0:null===(Z=q.listing)||void 0===Z?void 0:Z.agent,t=null==e?void 0:null===(O=e.email)||void 0===O?void 0:O._text;(ei=!!t)?en="listingemailagent":(en="agentemailagent",el=null==e?void 0:null===(U=e._attributes)||void 0===U?void 0:U.id)}}let[es,er]=(0,a.useState)(!1),[ed,eu]=(0,a.useState)(!1),[ec,ev]=(0,a.useState)({}),[em,ep]=(0,a.useState)(!1),eg=(0,a.useRef)(null),ef=(0,a.useRef)(null),e_=(0,a.useRef)(null),eh=(0,a.useRef)(null),eb=(0,a.useRef)(null),ey=(0,a.useRef)(null),ex=/[<>!=?]/,ej=e=>ex.test(e),eN=(0,L.N_)(),eA=async e=>{var t,l,i,a,n,o,s,d,u,c,v,m,p,g,f,_,N,w,D,I,C,M,S,P,T,E;if(!(null==eg?void 0:null===(t=eg.current)||void 0===t?void 0:t.value)||!(null==ef?void 0:null===(l=ef.current)||void 0===l?void 0:l.value)||!(null==e_?void 0:null===(i=e_.current)||void 0===i?void 0:i.value))return;let G={};if((!(null==eg?void 0:null===(a=eg.current)||void 0===a?void 0:a.value)||ej(eg.current.value))&&(G.firstname="Invalid (<,>,!,=,?)"),(!(null==ef?void 0:null===(n=ef.current)||void 0===n?void 0:n.value)||ej(ef.current.value))&&(G.lastname="Invalid (<,>,!,=,?)"),(!(null==e_?void 0:null===(o=e_.current)||void 0===o?void 0:o.value)||ej(e_.current.value))&&(G.email="Invalid (<,>,!,=,?)"),(null==eh?void 0:null===(s=eh.current)||void 0===s?void 0:s.value)&&ej(eh.current.value)&&(G.phone="Invalid (<,>,!,=,?)"),(null==eb?void 0:null===(d=eb.current)||void 0===d?void 0:d.value)&&ej(eb.current.value)&&(G.message="Invalid (<,>,!,=,?)"),Object.keys(G).length>0){ev(G);return}ev({}),ep(!0),(0,A.ListtracReportingSirHuge)("lead");let X=new FormData;X.append("a","1"),X.append("idrecord",ei?ee:el),X.append("email_agent_agentindex","1"),X.append("email_agent_user_name","".concat(null==eg?void 0:null===(u=eg.current)||void 0===u?void 0:u.value," ").concat(null==ef?void 0:null===(c=ef.current)||void 0===c?void 0:c.value)),X.append("email_agent_user_email",(null==e_?void 0:null===(v=e_.current)||void 0===v?void 0:v.value)?null==e_?void 0:null===(m=e_.current)||void 0===m?void 0:m.value:""),X.append("email_agent_user_phone",(null==eh?void 0:null===(p=eh.current)||void 0===p?void 0:p.value)?null==eh?void 0:null===(g=eh.current)||void 0===g?void 0:g.value:""),X.append("email_agent_user_message",(null==eb?void 0:null===(f=eb.current)||void 0===f?void 0:f.value)?null==eb?void 0:null===(_=eb.current)||void 0===_?void 0:_.value:""),X.append("email_agent_appointment_type",""),X.append("email_agent_date",""),X.append("email_agent_time",""),X.append("email_agent_date2",""),X.append("email_agent_time2",""),X.append("email_agent_date3",""),X.append("email_agent_time3",""),X.append("email_agent_referrer",Q),X.append("channel",(null==K?void 0:null===(N=K.legacyData)||void 0===N?void 0:null===(w=N.listing)||void 0===w?void 0:null===(D=w.channel)||void 0===D?void 0:D._text)?null==K?void 0:null===(I=K.legacyData)||void 0===I?void 0:null===(C=I.listing)||void 0===C?void 0:null===(M=C.channel)||void 0===M?void 0:M._text:"sales"),X.append("email_agent_custom_fields","<fields></fields>"),X.append("g-recaptcha-response",e),ei||(X.append("to",""),X.append("from",""),X.delete("email_agent_time"),X.delete("email_agent_time2"),X.delete("email_agent_time3"));let R=(0,j.bG)("rebrandingId"),F=(0,j.bG)("rebrandingType"),B=(0,b.D)();B+="/widget/nowrapper/".concat(en,"/send/xml-out");let q=F&&R?"&mp_".concat(F,"=").concat(R):"";B+="?is_mp=1".concat(q);let Z=await fetch(B,{method:"POST",body:X}),O=await Z.text(),U=(await (0,y.p)(O)).page.emailmodule,z=(null==U?void 0:U.responsecode._text)!=="invaliddata",H=(null==U?void 0:U.responsecode._text)!=="recaptchaerror",V=(null==U?void 0:U.responsecode._text)!=="error";if(ep(!1),U&&z&&H&&V){er(!0),W&&(0,L.G6)("FB","Purchase",{content_ids:W.toLowerCase(),content_type:"home_listing"});let e={};for(let[t,l]of X.entries())e[t]=l;let t=(0,h.DM)(),l=new x.Y({responseCode:null==U?void 0:U.responsecode._text,recordReportDatas:Object.values(null==U?void 0:U.recordreportdatas).map(e=>{var l;let i=null==e?void 0:null===(l=e._attributes)||void 0===l?void 0:l.recordid;return{recordid:i,reportdata:e._cdata,extraParams:void 0!==t?t[i]:{}}}),sendStatusReportDatas:Object.values(null==U?void 0:U.leadstatusreportdatas).map(e=>{var l,i,a;let n=null==e?void 0:null===(l=e._attributes)||void 0===l?void 0:l.recordid,o=void 0!==t?t[n]:{};return void 0!==o&&(o.receiptId=null==e?void 0:null===(a=e._attributes)||void 0===a?void 0:a.recordid),{recordid:n,reportdata:null==e?void 0:null===(i=e.reportdata)||void 0===i?void 0:i._text,extraParams:o}}),recipientDatas:null==U?void 0:null===(S=U.recipientinfos)||void 0===S?void 0:S.recipientinfo,reportDataEmail:null==U?void 0:null===(P=U.recipientinfos)||void 0===P?void 0:null===(T=P.recipientinfo)||void 0===T?void 0:null===(E=T.agentemail)||void 0===E?void 0:E._text,postParameters:e,userPhone:e.email_agent_user_phone,emailReportEventName:"RE.Listing.EmailAgent"});l.DoReport(),Y&&requestAnimationFrame(()=>setTimeout(()=>{$(!1)},k.NV)),(0,L.G6)("GTM","dataLayerInitialized",{affiliateGuid:eN,event:"event form_submit_success",eventCategory:"property_detail",eventLabel:ee,eventAction:"click: ".concat(eN),linkUrl:(0,r.G)().Misc().mainDomainURLWithPaths})}else eu(!0)},eL=e=>{let t=document.getElementById("popup-portal");if(t&&!t.contains(e)){let e=document.querySelector(".m-listing-contact-info__popup-back");null==e||e.focus()}};return(0,i.jsxs)("div",{className:"m-listing-contact-info__contact",id:Y?"listingContactInfoWrapperPopup":"listingContactInfoWrapper",children:[(0,i.jsx)("div",{id:"listingContactInfoForm",className:"m-listing-contact-info__contact-anchor",tabIndex:Y?0:-1,"aria-label":"Contact Agent Form"}),!ed&&!es&&(0,i.jsx)("h3",{className:"m-listing-contact-info__contact-title",children:(0,m.X)("global:get in touch")}),(0,i.jsx)("div",{className:"m-listing-contact-info__contact-form",children:es||ed?es?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"message-success message-success__heading",children:(0,m.X)("global:Thank you for your interest")}),(0,i.jsx)("div",{className:"message-success__body",children:(0,m.X)("global:One of our agents will be in touch with you soon.")}),!Y&&(0,i.jsxs)("button",{className:"button-new-message",onClick:()=>{var e;(0,L.G6)("GTM","dataLayerInitialized",{affiliateGuid:eN,event:"event contact_agent_intent",eventCategory:"property_detail",eventLabel:"",eventAction:"click: ".concat(eN),linkUrl:(0,r.G)().Misc().mainDomainURLWithPaths}),eu(!1),er(!1),null==ey||null===(e=ey.current)||void 0===e||e.setAttribute("disabled","false")},children:[(0,i.jsx)("span",{children:(0,m.X)("global:send another message")}),(0,i.jsx)("i",{className:"icon icon-arrow-editable"})]})]}):ed?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"message-success message-success__heading",children:(0,m.X)("global:An error occurred. please try again")}),!Y&&(0,i.jsxs)("button",{className:"button-new-message",onClick:()=>{var e;(0,L.G6)("GTM","dataLayerInitialized",{affiliateGuid:eN,event:"event contact_agent_intent",eventCategory:"property_detail",eventLabel:"",eventAction:"click: ".concat(eN),linkUrl:(0,r.G)().Misc().mainDomainURLWithPaths}),eu(!1),er(!1),null==ey||null===(e=ey.current)||void 0===e||e.setAttribute("disabled","false")},children:[(0,i.jsx)("span",{children:(0,m.X)("global:send another message")}),(0,i.jsx)("i",{className:"icon icon-arrow-editable"})]})]}):null:(0,i.jsx)(p.Z,{formID:"GetInTouchForm",recaptchaResponseCallback:eA,children:(0,i.jsxs)("div",{className:"grid",children:[(0,i.jsx)("div",{className:"grid__item default--1-2 palm-wide--1-1 palm--1-1 lap-wide--1-1 lap--1-1 u-padding-right input-holder",children:(0,i.jsx)(I,{type:"text",name:"firstname",id:"firstname",placeholderKey:(0,m.X)("global:first name"),ariaLabelKey:(0,m.X)("global:first name"),required:!0,ref:eg,errorMessage:ec.firstname,setErrorMessage:ev,errors:ec})}),(0,i.jsx)("div",{className:"grid__item default--1-2 palm-wide--1-1 palm--1-1 lap-wide--1-1 lap--1-1 input-holder",children:(0,i.jsx)(I,{type:"text",name:"lastname",id:"lastname",placeholderKey:(0,m.X)("global:last name"),ariaLabelKey:(0,m.X)("global:last name"),required:!0,ref:ef,errorMessage:ec.lastname,setErrorMessage:ev,errors:ec})}),(0,i.jsx)("div",{className:"grid__item default--1-2 palm-wide--1-1 palm--1-1 lap-wide--1-1 lap--1-1 u-padding-right input-holder",children:(0,i.jsx)(I,{type:"email",name:"email",id:"email",placeholderKey:(0,m.X)("global:email address"),ariaLabelKey:(0,m.X)("global:email address"),required:!0,ref:e_,errorMessage:ec.email,setErrorMessage:ev,errors:ec})}),(0,i.jsx)("div",{className:"grid__item default--1-2 palm-wide--1-1 palm--1-1 lap-wide--1-1 lap--1-1 input-holder",children:(0,i.jsx)(I,{type:"text",name:"phone",id:"phone",placeholderKey:(0,m.X)("global:phone number")+" ("+(0,m.X)("global:optional")+")",ariaLabelKey:(0,m.X)("global:phone number")+" ("+(0,m.X)("global:optional")+")",ref:eh,errorMessage:ec.phone,setErrorMessage:ev,errors:ec,pattern:"[0-9]+",required:!1})}),(0,i.jsx)("div",{className:"grid__item default--1-1",children:(0,i.jsx)(I,{component:"textarea",type:"text",name:"message",id:"message",placeholderKey:(0,m.X)("global:message")+" ("+(0,m.X)("global:optional")+")",ariaLabelKey:(0,m.X)("global:message")+" ("+(0,m.X)("global:optional")+")",textAreaPlaceholderKey:function(e){let{text:t,propertyName:l}=e;return null==t?void 0:t.replace("{0}",l)}({text:ea,propertyName:(0,N.b8)(et)}),required:!0,ref:eb})}),(0,i.jsx)(_.Z,{}),!Y&&(0,i.jsxs)("button",{className:"button-submit",onClick:()=>{(0,L.G6)("GTM","dataLayerInitialized",{affiliateGuid:eN,event:"event send_message_intent",eventCategory:"property_detail",eventLabel:ee,eventAction:"click: ".concat(eN),linkUrl:(0,r.G)().Misc().mainDomainURLWithPaths})},type:"submit",disabled:em,children:[(0,i.jsx)("span",{children:(0,m.X)("global:send message")}),(0,i.jsx)("i",{className:"icon icon-arrow-editable"})]}),(0,i.jsx)("div",{className:"disclaimer",dangerouslySetInnerHTML:{__html:(0,m.X)("global:send message disclaimer",[{search:"{0}",replacement:"https://sothebysrealty.com/eng/terms"},{search:"{1}",replacement:"https://sothebysrealty.com/privacy-policy"}])}}),Y&&!es&&!ed&&(0,i.jsx)("div",{className:"m-listing-contact-info__popup-submit-wrapper",children:(0,i.jsxs)("button",{className:"button-submit",type:"submit",ref:ey,onBlur:e=>{e.preventDefault(),e.stopPropagation(),eL(e.relatedTarget)},onClick:()=>{(0,L.G6)("GTM","dataLayerInitialized",{affiliateGuid:eN,event:"event send_message_intent",eventCategory:"property_detail",eventLabel:ee,eventAction:"click: ".concat(eN),linkUrl:(0,r.G)().Misc().mainDomainURLWithPaths})},children:[(0,i.jsx)("span",{children:(0,m.X)("global:send message")}),(0,i.jsx)("i",{className:"icon icon-arrow-editable"})]})})]})})})]})},I=(0,a.forwardRef)((e,t)=>{let{component:l,type:n,name:o,id:s,placeholderKey:r,ariaLabelKey:d,required:u=!0,customClassName:c,textAreaPlaceholderKey:v,onValueChange:m,errorMessage:p,setErrorMessage:_,errors:h,pattern:b}=e,[y,x]=(0,a.useState)(!1),[j,N]=(0,a.useState)("");(0,a.useEffect)(()=>{j?x(!0):x(!1)},[j]);let A=/[<>!=?]/,L=()=>x(!0),k=()=>x(""!==j),w=e=>{if("[0-9]+"===b&&e.target.value&&!/^\d+$/.test(e.target.value)){e.target.value=e.target.value.replace(/[^\d]/g,"");return}let t=e.target.value;N(t);let l="";if(A.test(t)&&(l="Invalid (<,>,!,=,?)"),_){if(l){let e={...h,[o]:l};_(e)}else{let e={...h};delete e[o],_(e)}}m&&m(t)};return"textarea"===l?(0,i.jsxs)("div",{className:"input-container  input-container--textarea ".concat(c||""," ").concat(p?"has-error":""),children:[(0,i.jsx)("label",{htmlFor:s,children:p?(0,i.jsx)("div",{className:"error-message",children:p}):r}),(0,i.jsx)(f.Z,{id:s,name:o,onBlurEvent:k,onFocusEvent:L,customClass:y?"active":"",placeholder:v||r,ariaLabel:d,ref:t})]}):(0,i.jsxs)("div",{className:"input-container ".concat(c||""," ").concat(p?"has-error":""),children:[(0,i.jsx)("label",{htmlFor:s,className:y?"u-transition-all u-fade-in":"u-visibility--hidden",children:p?(0,i.jsx)("div",{className:"error-message",children:p}):r}),(0,i.jsx)(g.Z,{ref:t,type:n,onFocusEvent:L,onBlurEvent:k,onChangeEvent:w,name:o,id:s,placeholder:r,ariaLabel:d,required:u,customClassName:y?"active":"",pattern:b})]})});I.displayName="InputWithLabel";var C=l(3605),M=l(80152),S=l(53290),P=l(91002),T=l(74318),E=l(14955),G=l(22160),X=l(67048),R=l(83766),F=l(15324);let B=e=>{var t,l,p,g,f,_,h,b,y,x;let{config:j}=e,N=(0,r.G)().MainModuleBaseData(),A=(0,o.v9)(e=>(0,r.G)().ModuleData("rebrandingmodule","rebrandingmodule",e)),L=null===(t=N.legacyData)||void 0===t?void 0:null===(l=t.listing)||void 0===l?void 0:l.originalagent,[w,I]=(0,a.useState)(null),B=(0,a.useMemo)(()=>{var e,t;return(null==A?void 0:null===(e=A.properties)||void 0===e?void 0:e.broker)?(0,d.Yd)(null==A?void 0:null===(t=A.properties)||void 0===t?void 0:t.broker):{}},[]),q=(0,a.useMemo)(()=>{var e,t;return(null==A?void 0:null===(e=A.properties)||void 0===e?void 0:e.agent)?(0,d.Yd)(null==A?void 0:null===(t=A.properties)||void 0===t?void 0:t.agent):{}},[]),Z=(0,a.useMemo)(()=>{var e;return(0,d.Yd)(null==N?void 0:null===(e=N.legacyData)||void 0===e?void 0:e.listing)},[]),O=Object.assign({},Z,q,B),U=(null==O?void 0:null===(p=O.DataSourceType)||void 0===p?void 0:p.toLowerCase())===k.Es,K=(null==O?void 0:null===(g=O.DataSourceType)||void 0===g?void 0:g.toLowerCase())===k.$w,W=Object.keys(q).length>0,z=Object.keys(B).length>0,H=(0,r.G)().Misc().channelKey,Y=H.toLowerCase()===F.g.Rented.toLowerCase(),V=(0,a.useMemo)(()=>{var e,t,l;let i=A?null==A?void 0:null===(e=A.properties)||void 0===e?void 0:e.agent:K&&Y?L:null===(t=N.legacyData)||void 0===t?void 0:null===(l=t.listing)||void 0===l?void 0:l.agent;return(i=Array.isArray(i)?i:i?[i]:[]).filter(e=>{var t;return null==e?void 0:null===(t=e._attributes)||void 0===t?void 0:t.name})},[]),[$,J]=(0,a.useState)(0),[Q,ee]=(0,a.useState)(!1),[et,el]=(0,a.useState)(!1),[ei,ea]=(0,a.useState)(!1),[en,eo]=(0,a.useState)([]),es=e=>{J(e.detail.index)},er=(0,a.useCallback)(e=>{let{detail:t}=e;ee(t)},[]),ed=()=>{ea(!0),requestAnimationFrame(()=>setTimeout(()=>{el(!1),ea(!1);let e=document.querySelector(".m-listing-contact-info__popup");null==e||e.focus()},300))},eu=e=>{let t=document.querySelector(".m-listing-contact-info__popup-info");t&&t.contains(e)&&el(!1)},ec=(0,a.useRef)(null),{isLaptop:ev}=(0,S._)();(0,P.Z)(es),(0,E.Z)(ec,{onEscPress:()=>{ee(!1)}}),(0,a.useEffect)(()=>{w||I(document.getElementById("popup-portal"));let e=async()=>{let e=Array(V.length),t=[];for(let l=0;l<V.length;l++)t.push((0,G.Z)(V[l]).then(t=>e[l]=t));await Promise.allSettled(t),eo(e)};return e(),ev||(document.body.style.paddingBottom="100px"),window.addEventListener(k.Vz,er),()=>{window.removeEventListener(k.Vz,er)}},[]),(0,a.useEffect)(()=>{Q?(document.body.style.overflow="hidden",requestAnimationFrame(()=>setTimeout(()=>{let e=document.getElementById("listingContactInfoAgents");e&&e.focus()},300))):(document.body.style.overflow="",el(!1),requestAnimationFrame(()=>setTimeout(()=>{let e=document.querySelector(".m-listing-contact-info__contact-pupup-cta");e&&e.focus()},100)))},[Q]),(0,a.useEffect)(()=>{ev&&ee(!1)},[ev]),(0,a.useEffect)(()=>{let e=document.querySelector(".m-listing-contact-info__popup-info");e&&(et?requestAnimationFrame(()=>setTimeout(()=>{e.style.height="100%"},300)):e.style.height="auto")},[et]);let em=V[$],ep={officeName:null==O?void 0:O.BrokerName,officeUrl:(z?null==B?void 0:B.CanonicalUrl:null==O?void 0:O.BrokerIdUrl)||"",officeAddress:z?null==A?void 0:null===(f=A.properties)||void 0===f?void 0:null===(_=f.broker)||void 0===_?void 0:_.address:U?null==N?void 0:null===(h=N.legacyData)||void 0===h?void 0:h.listing:null==em?void 0:em.address,brokerAddress:U?null==N?void 0:null===(b=N.legacyData)||void 0===b?void 0:null===(y=b.listing)||void 0===y?void 0:null===(x=y.broker)||void 0===x?void 0:x.brokeraddress:void 0,isBroker:U};return(0,i.jsxs)("div",{className:"m-listing-contact-info",ref:ec,children:[(0,i.jsx)(s.default,{}),V&&V.length>1&&em&&(0,i.jsx)(u.Z,{agents:V,selectedAgentIndex:$,setSelectedAgentIndex:J}),!ev&&Q&&w&&(0,n.createPortal)((0,i.jsxs)(T.Z,{setOpenPopup:ee,openPopup:Q,children:[(0,i.jsxs)("div",{className:"m-listing-contact-info__popup-info",style:{overflow:et?"hidden":"auto"},children:[(0,i.jsx)("div",{id:"listingContactInfoAgents",className:"m-listing-contact-info__contact-anchor","aria-label":"Contact Agent - Dialog",tabIndex:0}),V&&V.length>0&&(0,i.jsx)(c.Z,{agents:V,agentLicences:en,selectedAgentIndex:$,setSelectedAgentIndex:J,popupMode:!0,setDisplayForm:el,setOpenPopup:ee}),(K||z||!em)&&0===en.length&&(0,i.jsx)(v.Z,{selectedAgent:em,selectedAgentLicense:en[$],brokerName:null==O?void 0:O.BrokerName,advertiser:null==O?void 0:O.AdvertiserName,attribution:null==O?void 0:O.ListingAttribution,isBroker:U,isMls:K,isPreferredOffice:z,isPreferredAgent:W,officeDetails:ep,popupMode:!0,mobileLayout:!0,setOpenPopup:ee}),(!V||0===V.length)&&(0,i.jsx)("div",{className:"m-listing-contact-info__agent-cta-wrapper",children:(0,i.jsxs)("button",{className:"m-listing-contact-info__agent-cta",onClick:()=>{var e;el&&el(!0),null===(e=document.querySelector(".m-listing-contact-info__popup"))||void 0===e||e.scrollTo({behavior:"smooth",top:0}),requestAnimationFrame(()=>setTimeout(()=>{let e=document.getElementById("listingContactInfoForm");null==e||e.focus()},300))},"aria-label":"Contact agent - Email",children:[(0,i.jsx)("span",{"aria-hidden":"true",children:(0,m.X)("global:Email")}),(0,i.jsx)(R.Z,{})]})})]}),(0,i.jsxs)("div",{className:["m-listing-contact-info__popup-form",et?"m-listing-contact-info__popup-form--visible":"",ei?"m-listing-contact-info__popup-form--hidden":""].join(" "),children:[(0,i.jsx)("button",{onClick:ed,onFocus:()=>el(!0),onBlur:e=>{e.preventDefault(),e.stopPropagation(),eu(e.relatedTarget)},className:"m-listing-contact-info__popup-back","aria-label":(0,m.X)("global:back"),children:(0,i.jsx)(X.Z,{})}),(0,i.jsx)(D,{data:N,listingWebId:null==O?void 0:O.IdWeb,agents:V,selectedAgentIndex:$,popupMode:!0,displayForm:et,setOpenPopup:ee,config:j})]})]}),w),!ev&&V&&V.length>1&&(0,i.jsx)(c.Z,{agents:V,agentLicences:en,selectedAgentIndex:$,setSelectedAgentIndex:J,setOpenPopup:ee}),(ev||V&&V.length<=1)&&(0,i.jsx)(v.Z,{selectedAgent:em,selectedAgentLicense:en[$],brokerName:null==O?void 0:O.BrokerName,advertiser:null==O?void 0:O.AdvertiserName,attribution:null==O?void 0:O.ListingAttribution,isBroker:U,isMls:K,isPreferredOffice:z,isPreferredAgent:W,officeDetails:ep,setOpenPopup:ee}),(0,i.jsx)(D,{data:N,listingWebId:null==O?void 0:O.IdWeb,agents:V,selectedAgentIndex:$,config:j}),ep.officeName&&(0,i.jsx)("div",{className:"m-listing-contact-info__agent-office--mobile",children:(0,i.jsx)(M.Z,{office:ep})}),K&&((null==O?void 0:O.ListingAttribution)||(null==O?void 0:O.BrokerName))&&H.toLowerCase()!==F.g.Sold.toLowerCase()&&H.toLowerCase()!==F.g.Rented.toLowerCase()&&(0,i.jsx)("div",{className:"m-listing-contact-info__advertiser--mobile",children:(0,i.jsx)(C.Z,{advertiser:(null==O?void 0:O.ListingAttribution)||(null==O?void 0:O.BrokerName)})})]})};var q=a.memo(B)}}]);